language: python
cache: pip
install:
    pip install -r requirements-dev.pip

notifications:
  on_success: change
  on_failure: always

matrix:
  include:
    - name: "mypy"
      python: 3.8
      script:
          - mypy pegen

    - name: "pytest"
      python: 3.8
      script:
        - pytest -v --cov=pegen --cov-report term
    - after_success:
        - coveralls


    - name: "makefile_targets"
      python: 3.8
          - PYTHON="python"
      script:
          - make clean
          - make dump
          - make test
          - make simpy
          - make regen-metaparser
